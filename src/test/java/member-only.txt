2016-06-28 10:57:25.602 [in_0-richmj-component]  RichmjComponent.processPacket()  INFO: RichmjComponent 接收到packet ---->：from=sess-man@tch-pc, to=null, DATA=<iq realTo="richmj-chaohui-members-only-3@muc.192.168.43.146/chaohui" type="set" xmlns="jabber:client" from="richmj@192.168.43.146/879412121-tigase-1" to="richmj-component@192.168.43.146" id="uj1sh"><query xmlns="http://jabber.org/protocol/muc#owner"><x type="submit" xmlns="jabber:x:data"><field var="FORM_TYPE"><value>http://jabber.org/protocol/muc#roomconfig</value></field><field var="muc#roomconfig_membersonly"><value>1</value></field></x></query></iq>, SIZE=458, XMLNS=jabber:client, PRIORITY=NORMAL, PERMISSION=AUTH, TYPE=set
2016-06-28 10:57:25.602 [in_0-richmj-component]  RichmjComponent.isPacketFromRichMJ()  INFO: from:richmj@192.168.43.146, expectFrom:richmj@192.168.43.146
2016-06-28 10:57:25.602 [in_0-richmj-component]  RichmjComponent.processPacket()  INFO: isPacketFromRichMJ...
2016-06-28 10:57:25.602 [in_0-richmj-component]  RichmjComponent.handleRichMJPacket()  INFO: ============================= copyPacket:from=chaohui@192.168.43.146, to=richmj-chaohui-members-only-3@muc.192.168.43.146/chaohui, DATA=<iq type="set" xmlns="jabber:client" from="chaohui@192.168.43.146" to="richmj-chaohui-members-only-3@muc.192.168.43.146/chaohui" id="uj1sh"><query xmlns="http://jabber.org/protocol/muc#owner"><x type="submit" xmlns="jabber:x:data"><field var="FORM_TYPE"><value>http://jabber.org/protocol/muc#roomconfig</value></field><field var="muc#roomconfig_membersonly"><value>1</value></field></x></query></iq>, SIZE=399, XMLNS=jabber:client, PRIORITY=NORMAL, PERMISSION=NONE, TYPE=set
2016-06-28 10:57:25.603 [in_0-richmj-component]  RichmjComponent.handleRichMJPacket()  INFO: getNicknameFromJid: chaohui
2016-06-28 10:57:25.603 [in_0-richmj-component]  RichmjComponent.handleRichMJPacket()  INFO: copyPacket.getTo(): richmj-chaohui-members-only-3@muc.192.168.43.146/chaohui
2016-06-28 10:57:25.603 [in_12-muc]        AbstractComponent.processPacket()  FINER:    Received: <iq type="set" xmlns="jabber:client" from="chaohui@192.168.43.146" to="richmj-chaohui-members-only-3@muc.192.168.43.146/chaohui" id="uj1sh"><query xmlns="http://jabber.org/protocol/muc#owner"><x type="submit" xmlns="jabber:x:data"><field var="FORM_TYPE"><value>http://jabber.org/protocol/muc#roomconfig</value></field><field var="muc#roomconfig_membersonly"><value>1</value></field></x></query></iq>
2016-06-28 10:57:25.603 [in_12-muc]        AbstractComponent.processPacket()  FINEST:   XMPP error condition: bad-request generated by tigase.muc.modules.RoomConfigurationModule.process(RoomConfigurationModule.java:169)  when processing from=chaohui@192.168.43.146, to=richmj-chaohui-members-only-3@muc.192.168.43.146/chaohui, DATA=<iq type="set" xmlns="jabber:client" from="chaohui@192.168.43.146" to="richmj-chaohui-members-only-3@muc.192.168.43.146/chaohui" id="uj1sh"><query xmlns="http://jabber.org/protocol/muc#owner"><x type="submit" xmlns="jabber:x:data"><field var="FORM_TYPE"><value>http://jabber.org/protocol/muc#roomconfig</value></field><field var="muc#roomconfig_membersonly"><value>1</value></field></x></query></iq>, SIZE=399, XMLNS=jabber:client, PRIORITY=NORMAL, PERMISSION=NONE, TYPE=set
2016-06-28 10:57:25.603 [in_12-muc]        AbstractComponent.sendException()  FINEST:   Sending back: from=richmj-chaohui-members-only-3@muc.192.168.43.146/chaohui, to=chaohui@192.168.43.146, DATA=<iq from="richmj-component@192.168.43.146" to="richmj@192.168.43.146/879412121-tigase-1" type="error" id="uj1sh" xmlns="jabber:client"><query xmlns="http://jabber.org/protocol/muc#owner"><x type="submit" xmlns="jabber:x:data"><field var="FORM_TYPE"><value>http://jabber.org/protocol/muc#roomconfig</value></field><field var="muc#roomconfig_membersonly"><value>1</value></field></x></query><error code="400" type="modify"><bad-request xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error></iq>, SIZE=492, XMLNS=jabber:client, PRIORITY=NORMAL, PERMISSION=NONE, TYPE=error
2016-06-28 10:57:25.603 [in_12-muc]        AbstractComponent$3.write()        FINER:    Sent: <iq from="richmj-component@192.168.43.146" to="richmj@192.168.43.146/879412121-tigase-1" type="error" id="uj1sh" xmlns="jabber:client"><query xmlns="http://jabber.org/protocol/muc#owner"><x type="submit" xmlns="jabber:x:data"><field var="FORM_TYPE"><value>http://jabber.org/protocol/muc#roomconfig</value></field><field var="muc#roomconfig_membersonly"><value>1</value></field></x></query><error code="400" type="modify"><bad-request xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error></iq>
2016-06-28 10:57:25.607 [in_9-c2s]         XMPPIOService.processWaitingPackets()  FINEST: c2s@tch-pc/192.168.43.146_5222_192.168.43.146_51616, type: accept, Socket: ZLIB: TLS: c2s@tch-pc/192.168.43.146_5222_192.168.43.146_51616 Socket[addr=/192.168.43.146,port=51616,localport=5222], jid: richmj@192.168.43.146/879412121-tigase-1, Sending packet: from=sess-man@tch-pc, to=c2s@tch-pc/192.168.43.146_5222_192.168.43.146_51616, DATA=<iq from="richmj-component@192.168.43.146" to="richmj@192.168.43.146/879412121-tigase-1" type="error" id="uj1sh" xmlns="jabber:client"><query xmlns="http://jabber.org/protocol/muc#owner"><x type="submit" xmlns="jabber:x:data"><field var="FORM_TYPE"><value>http://jabber.org/protocol/muc#roomconfig</value></field><field var="muc#roomconfig_membersonly"><value>1</value></field></x></query><error code="400" type="modify"><bad-request xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error></iq>, SIZE=492, XMLNS=jabber:client, PRIORITY=NORMAL, PERMISSION=AUTH, TYPE=error
2016-06-28 10:57:25.608 [in_9-c2s]         XMPPIOService.processWaitingPackets()  FINEST: c2s@tch-pc/192.168.43.146_5222_192.168.43.146_51616, type: accept, Socket: ZLIB: TLS: c2s@tch-pc/192.168.43.146_5222_192.168.43.146_51616 Socket[addr=/192.168.43.146,port=51616,localport=5222], jid: richmj@192.168.43.146/879412121-tigase-1, SENT: <iq from="richmj-component@192.168.43.146" to="richmj@192.168.43.146/879412121-tigase-1" type="error" id="uj1sh" xmlns="jabber:client"><query xmlns="http://jabber.org/protocol/muc#owner"><x type="submit" xmlns="jabber:x:data"><field var="FORM_TYPE"><value>http://jabber.org/protocol/muc#roomconfig</value></field><field var="muc#roomconfig_membersonly"><value>1</value></field></x></query><error code="400" type="modify"><bad-request xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error></iq>

正确的：
<iq xmlns="jabber:client" type="set" from="richmj@192.168.43.146/879412121-tigase-2" to="members-only-67@muc.192.168.43.146">
   <query xmlns="http://jabber.org/protocol/muc#owner">
      <x xmlns="jabber:x:data" type="submit">
         <field var="FORM_TYPE">
            <value>http://jabber.org/protocol/muc#roomconfig</value>
         </field>
         <field var="muc#roomconfig_membersonly">
            <value>1</value>
         </field>
      </x>
   </query>
</iq>

<iq xmlns="jabber:client" type="set" from="chaohui@192.168.43.146" to="richmj-chaohui-members-only-3@muc.192.168.43.146/chaohui" id="uj1sh">
   <query xmlns="http://jabber.org/protocol/muc#owner">
      <x xmlns="jabber:x:data" type="submit">
         <field var="FORM_TYPE">
            <value>http://jabber.org/protocol/muc#roomconfig</value>
         </field>
         <field var="muc#roomconfig_membersonly">
            <value>1</value>
         </field>
      </x>
   </query>
</iq>
